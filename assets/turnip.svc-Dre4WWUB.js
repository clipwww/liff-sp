import{j as c}from"./index-D_e8FN_z.js";import{t as u}from"./firebase-LKY1-RY1.js";const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function p(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}let s;const h=new Uint8Array(16);function m(){if(!s){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");s=crypto.getRandomValues.bind(crypto)}return s(h)}const f=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),l={randomUUID:f};function g(e,t,r){e=e||{};const n=e.random??e.rng?.()??m();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,p(n)}function y(e,t,r){return l.randomUUID&&!e?l.randomUUID():g(e)}function I(e,t){return new Promise(r=>{u.child("price").child(c(e).format("YYYY-MM-DD")).on("value",n=>{r();const o=n.val();if(!o)return t([]);const d=Object.keys(o).map(a=>({id:a,...o[a]}));t(d)})})}function Y(e){return u.child("price").child(c(e).format("YYYY-MM-DD")).off()}function D(e,t){return new Promise(r=>{u.child("price").child(c(t).format("YYYY-MM-DD")).child(e).once("value",n=>{const o=n.val();r(o)})})}function L(e,t){u.child("price").on("value",r=>{try{const n=r.val(),o=[];Object.keys(n).forEach(d=>{n[d][e]&&o.push({id:d,...n[d][e]})}),t(o)}catch{t([])}})}function w(){return u.child("price").off()}function S(e){u.child("profile").on("value",t=>{const r=t.val();if(!r)return e([]);const n=Object.keys(r).map(o=>({id:o,...r[o]}));e(n)})}function b(){return u.child("profile").off()}function P(e,t,r){return u.child("price").child(c(t).format("YYYY-MM-DD")).child(e).set({...r,dateUpdated:c().toISOString()})}function M(e,t){return u.child("profile").child(e).set({...t,dateUpdated:c().toISOString()})}function O(e){return new Promise(t=>{u.child("group").on("value",r=>{t();const n=r.val();if(!n)return e([]);const o=Object.keys(n).map(d=>n[d]);e(o)})})}function j(){return u.child("group").off()}function x(e){const t=y();return u.child("group").child(t).set({...e,id:t,dateCreated:c().toISOString(),members:[e.creatorId]})}function B(e,t){return u.child("group").child(e).set({...t,dateUpdated:c().toISOString()})}function G(e){return u.child("group").child(e).remove()}function R(e,t){return new Promise(r=>{u.child("group").child(e).on("value",n=>{r();const o=n.val();if(!o)return t(null);t(o)})})}function V(e){return u.child("group").child(e).off()}export{M as a,V as b,x as c,P as d,O as e,I as f,D as g,S as h,j as i,b as j,Y as k,R as l,w as m,L as n,G as r,B as u};
