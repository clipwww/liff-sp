import"./acnh.svc-Dirrrzgx.js";import{c as L}from"./himawari.svc-DFXE3k5x.js";import{_ as w,r as n,o as l,c as d,a as r,w as i,b as y,g as m,F as f,d as p,e as V,t as x}from"./index-D_e8FN_z.js";import"./firebase-LKY1-RY1.js";import{t as b}from"./index-C0sn0UrP.js";const E={data(){return{keyword:"",page:1,items:[],isLoading:!1,isFinished:!1,isRefreshing:!1,isError:!1}},methods:{toSafeHtmlString:b,async getList(o=!1){o&&(this.items=[],this.page=1,this.isFinished=!1,this.isRefreshing=!1),this.isRefreshing=!1,this.isLoading=!0;const e=await L({keyword:this.keyword,page:this.page});if(this.isLoading=!1,!e.success){this.isError=!0;return}if(!e.items.length){this.isFinished=!0;return}this.isError=!1,this.page++,this.items.push(...e.items)},goDetails(o){this.$router.push({name:"HimawariDetails",params:{id:o.id},query:{title:o.title}})}}},F={class:"list__container"},R={class:"list__content with-safe-area-inset-bottom"},C={class:"little-text"};function B(o,e,D,S,s,a){const g=n("van-button"),h=n("van-search"),c=n("van-skeleton"),u=n("van-cell"),_=n("van-image"),v=n("van-list"),k=n("van-pull-refresh");return l(),d("div",F,[r(h,{modelValue:s.keyword,"onUpdate:modelValue":e[1]||(e[1]=t=>s.keyword=t),modelModifiers:{trim:!0},"show-action":"",placeholder:"請輸入關鍵字搜尋",onSearch:e[2]||(e[2]=t=>a.getList(!0))},{action:i(()=>[r(g,{type:"primary",size:"small",plain:"",onClick:e[0]||(e[0]=t=>a.getList(!0))},{default:i(()=>[...e[7]||(e[7]=[y(" 搜尋 ",-1)])]),_:1})]),_:1},8,["modelValue"]),m("div",R,[r(k,{modelValue:s.isRefreshing,"onUpdate:modelValue":e[5]||(e[5]=t=>s.isRefreshing=t),"head-height":"150",onRefresh:e[6]||(e[6]=t=>a.getList(!0))},{default:i(()=>[r(v,{modelValue:s.isLoading,"onUpdate:modelValue":e[3]||(e[3]=t=>s.isLoading=t),error:s.isError,"onUpdate:error":e[4]||(e[4]=t=>s.isError=t),finished:s.isFinished,"finished-text":"没有更多了","error-text":"Oops...發生錯誤",offset:"50",onLoad:a.getList},{loading:i(()=>[m("div",null,[(l(),d(f,null,p(2,t=>r(u,{key:t},{default:i(()=>[r(c,{class:"padding-bt-5 padding-lr-0",row:4,title:"",avatar:"","avatar-shape":"square","avatar-size":"80"})]),_:1})),64))])]),default:i(()=>[(l(!0),d(f,null,p(s.items,t=>(l(),V(u,{key:t.id,"is-link":"",clickable:"",center:"",onClick:U=>a.goDetails(t)},{icon:i(()=>[r(_,{class:"margin-r-10",src:t.image,width:"80",fit:"contain"},null,8,["src"])]),title:i(()=>[m("div",C,x(t.title),1)]),_:2},1032,["onClick"]))),128))]),_:1},8,["modelValue","error","finished","onLoad"])]),_:1},8,["modelValue"])])])}const O=w(E,[["render",B]]);export{O as default};
