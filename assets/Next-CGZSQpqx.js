import{_ as g}from"./isEqual-dCtc9qNw.js";import{_ as D,r as s,o as a,c as l,g as c,a as i,F as d,d as p,e as w,w as r,b as x,t as M,h as G,v as C,j as V}from"./index-D_e8FN_z.js";import{M as L}from"./MovieListCell-DBJMqGbm.js";import{m}from"./firebase-LKY1-RY1.js";import"./acnh.svc-Dirrrzgx.js";import{c as N}from"./movie.svc-DNHuent_.js";import"./isArrayLike-fL3jztxv.js";import"./_getTag-CGruzcuc.js";const b={components:{MovieListCell:L},data(){return{keyword:"",moviesGroupByDate:[]}},computed:{filterMoviesGroupByDate(){return this.moviesGroupByDate?.map(e=>({...e,movies:e.movies.filter(t=>this.keyword?t.name.includes(this.keyword):!0)}))}},created(){m.child("movies-next").on("value",e=>{const t=e.val();t&&(this.moviesGroupByDate=t.items)}),this.getMoviesGroupBtDate()},beforeUnmount(){m.child("movies-next").off()},methods:{async getMoviesGroupBtDate(){const e=await N();e.success&&(g(this.moviesGroupByDate,e.items)||m.child("movies-next").set({items:e.items,dateCreated:+V()}))}}},E={class:"movie-list"},F={class:"list__container"},S={class:"list__content padding-b-30"};function U(e,t,j,q,n,v){const u=s("van-search"),_=s("van-tag"),f=s("MovieListCell"),h=s("van-cell-group"),y=s("van-skeleton"),k=s("van-cell");return a(),l("div",E,[c("div",F,[i(u,{modelValue:n.keyword,"onUpdate:modelValue":t[0]||(t[0]=o=>n.keyword=o),modelModifiers:{trim:!0},placeholder:"請輸入關鍵字搜尋"},null,8,["modelValue"]),c("div",S,[(a(!0),l(d,null,p(v.filterMoviesGroupByDate,(o,B)=>(a(),w(h,{key:B},{title:r(()=>[i(_,{type:"primary",size:"large",plain:""},{default:r(()=>[x(M(o.releaseDate),1)]),_:2},1024)]),default:r(()=>[i(f,{items:o.movies},null,8,["items"])]),_:2},1024))),128)),G(c("div",null,[(a(),l(d,null,p(10,o=>i(k,{key:o},{default:r(()=>[i(y,{row:1})]),_:1})),64))],512),[[C,!n.moviesGroupByDate.length]])])])])}const O=D(b,[["render",U]]);export{O as default};
