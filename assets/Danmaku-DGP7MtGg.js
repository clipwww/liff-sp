import{_ as L,r,o as a,c as d,a as o,w as i,b as w,g as l,F as p,d as m,e as V,t as h}from"./index-COOF5Zia.js";import{g as y}from"./himawari.svc-CiGVJhmN.js";import"./firebase-LKY1-RY1.js";import"./acnh.svc-CO3KZtm1.js";const b={data(){return{BASE_URL:"https://mechakucha-api.vercel.app/",keyword:"",page:1,items:[],isLoading:!1,isFinished:!1,isRefreshing:!1,isError:!1}},methods:{async getList(u=!1){if(!this.keyword)return;u&&(this.items=[],this.page=1,this.isFinished=!1,this.isRefreshing=!1),this.isRefreshing=!1,this.isLoading=!0;const e=await y(this.keyword,this.page);if(this.isLoading=!1,!e.success){this.isError=!0;return}if(this.page>=e.page.pageAmount||e.page.dataAmount===0){this.isFinished=!0;return}this.isError=!1,this.page++,this.items.push(...e.items)}}},E={class:"list__container"},R={class:"list__content with-safe-area-inset-bottom"},x={class:"little-text"};function B(u,e,U,F,t,n){const g=r("van-button"),_=r("van-search"),c=r("van-skeleton"),f=r("van-cell"),v=r("van-list"),k=r("van-pull-refresh");return a(),d("div",E,[o(_,{modelValue:t.keyword,"onUpdate:modelValue":e[1]||(e[1]=s=>t.keyword=s),modelModifiers:{trim:!0},"show-action":"",placeholder:"請輸入關鍵字搜尋",onSearch:e[2]||(e[2]=s=>n.getList(!0))},{action:i(()=>[o(g,{type:"primary",size:"small",plain:"",onClick:e[0]||(e[0]=s=>n.getList(!0))},{default:i(()=>[...e[7]||(e[7]=[w(" 搜尋 ",-1)])]),_:1})]),_:1},8,["modelValue"]),l("div",R,[o(k,{modelValue:t.isRefreshing,"onUpdate:modelValue":e[5]||(e[5]=s=>t.isRefreshing=s),"head-height":"150",onRefresh:e[6]||(e[6]=s=>n.getList(!0))},{default:i(()=>[o(v,{modelValue:t.isLoading,"onUpdate:modelValue":e[3]||(e[3]=s=>t.isLoading=s),finished:t.isFinished,error:t.isError,"onUpdate:error":e[4]||(e[4]=s=>t.isError=s),"immediate-check":!1,"finished-text":"没有更多了","error-text":"Oops...發生錯誤",offset:"50",onLoad:n.getList},{loading:i(()=>[l("div",null,[(a(),d(p,null,m(2,s=>o(f,{key:s},{default:i(()=>[o(c,{class:"padding-bt-5 padding-lr-0",row:4,title:"",avatar:"","avatar-shape":"square","avatar-size":"80"})]),_:1})),64))])]),default:i(()=>[(a(!0),d(p,null,m(t.items,s=>(a(),V(f,{key:s.id,"is-link":"",center:"",border:!1,url:`${t.BASE_URL}/himawari/${s.group_id}/danmaku?mode=download&group=1&filename=${s.title}`,href:`${t.BASE_URL}/himawari/${s.group_id}/danmaku?mode=download&group=1&filename=${s.title}`},{title:i(()=>[l("div",null,h(s.title),1)]),label:i(()=>[l("div",x," 彈幕量: "+h(s.count),1)]),_:2},1032,["url","href"]))),128))]),_:1},8,["modelValue","finished","error","onLoad"])]),_:1},8,["modelValue"])])])}const N=L(b,[["render",B],["__scopeId","data-v-00b5b2f3"]]);export{N as default};
