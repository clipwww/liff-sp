import{_ as g,r as s,o as a,c as l,g as c,a as i,F as d,d as p,h as D,v as w,j as x,e as M,w as r,b as G,t as C}from"./index-COOF5Zia.js";import{_ as V}from"./isEqual-dCtc9qNw.js";import{c as L}from"./movie.svc-CBsKLzfe.js";import{m}from"./firebase-LKY1-RY1.js";import"./acnh.svc-CO3KZtm1.js";import{M as N}from"./MovieListCell-qw6wCKlL.js";import"./isArrayLike-fL3jztxv.js";import"./_getTag-CGruzcuc.js";const b={components:{MovieListCell:N},data(){return{keyword:"",moviesGroupByDate:[]}},computed:{filterMoviesGroupByDate(){return this.moviesGroupByDate?.map(e=>({...e,movies:e.movies.filter(t=>this.keyword?t.name.includes(this.keyword):!0)}))}},created(){m.child("movies-next").on("value",e=>{const t=e.val();t&&(this.moviesGroupByDate=t.items)}),this.getMoviesGroupBtDate()},beforeUnmount(){m.child("movies-next").off()},methods:{async getMoviesGroupBtDate(){const e=await L();e.success&&(V(this.moviesGroupByDate,e.items)||m.child("movies-next").set({items:e.items,dateCreated:+x()}))}}},E={class:"movie-list"},F={class:"list__container"},S={class:"list__content padding-b-30"};function U(e,t,j,q,n,v){const u=s("van-search"),_=s("van-tag"),f=s("MovieListCell"),h=s("van-cell-group"),y=s("van-skeleton"),k=s("van-cell");return a(),l("div",E,[c("div",F,[i(u,{modelValue:n.keyword,"onUpdate:modelValue":t[0]||(t[0]=o=>n.keyword=o),modelModifiers:{trim:!0},placeholder:"請輸入關鍵字搜尋"},null,8,["modelValue"]),c("div",S,[(a(!0),l(d,null,p(v.filterMoviesGroupByDate,(o,B)=>(a(),M(h,{key:B},{title:r(()=>[i(_,{type:"primary",size:"large",plain:""},{default:r(()=>[G(C(o.releaseDate),1)]),_:2},1024)]),default:r(()=>[i(f,{items:o.movies},null,8,["items"])]),_:2},1024))),128)),D(c("div",null,[(a(),l(d,null,p(10,o=>i(k,{key:o},{default:r(()=>[i(y,{row:1})]),_:1})),64))],512),[[w,!n.moviesGroupByDate.length]])])])])}const O=g(b,[["render",U]]);export{O as default};
