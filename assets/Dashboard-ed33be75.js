import{m as o,n}from"./index-71d8585f.js";import{m as c}from"./index-899719e6.js";import{T as p,a as d}from"./TurnipSellPrice-02d0c279.js";import"./isArrayLike-e2a72aad.js";const s=c.getWeekdays(),l={};s.forEach(i=>{l[i.id]={am:"",pm:""}});const u={components:{TurnipLineChart:p,TurnipSellPrice:d},props:{groupList:{type:Array,default(){return[]}},priceList:{type:Array,default(){return[]}},histories:{type:Array,default(){return[]}}},data(){return{weekdays:s,showHistory:!1,historyItem:null}},computed:{...o({isLoggedIn:"isLoggedIn",profile:"profile"}),filterGroupList(){return this.groupList.filter(i=>i.members.includes(this.profile.userId))},filterHistories(){return this.histories.filter((i,t)=>t<3)},item(){return{profile:this.profile,...this.priceList.find(i=>i.id===this.profile.userId)||{buyPrice:"",sellPrice:l}}}},methods:{goDetails(i){this.$router.push({name:"TurnipGroupDetails",params:{id:i.id}})},openHistory(i){this.historyItem=i,this.showHistory=!0}}};var m=function(){var t=this,e=t._self._c;return e("div",[t.item?e("van-panel",[e("van-cell",{attrs:{slot:"header"},slot:"header"},[t.item.profile.pictureUrl?e("van-image",{staticClass:"margin-r-15",attrs:{slot:"icon",src:t.item.profile.pictureUrl,width:"50",height:"50",round:"","lazy-load":""},slot:"icon"}):t._e(),e("div",{attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t.item.profile.displayName)+" ")]),e("div",{staticClass:"little-text",attrs:{slot:"label"},slot:"label"},[t._v(" 買價："+t._s(t.item.buyPrice)+" ")])],1),e("TurnipSellPrice",{attrs:{"sell-price":t.item.sellPrice}}),e("div",{staticClass:"padding-bt-10"},[e("TurnipLineChart",{attrs:{id:t.item.id,"buy-price":t.item.buyPrice,"sell-price":t.item.sellPrice}})],1)],1):e("van-panel",[e("div",{attrs:{slot:"header"},slot:"header"},[e("div",{staticClass:"text-center padding-bt-30"},[e("van-icon",{staticClass:"fs-30",attrs:{name:"info"}}),e("div",[t._v("本週次還沒提供任何菜價唷")])],1)])]),e("van-cell-group",{attrs:{title:"已加入群組"}},t._l(t.filterGroupList,function(r){return e("van-cell",{key:r.id,attrs:{title:r.name,center:"","is-link":"",clickable:""},on:{click:function(a){return t.goDetails(r)}}},[e("div",{attrs:{slot:"label"},slot:"label"},[e("van-icon",{attrs:{name:"user-o"}}),e("span",{staticClass:"margin-l-5"},[t._v(t._s(r.members.length))])],1)])}),1),e("van-cell-group",{attrs:{title:"歷史紀錄"}},[t._l(t.filterHistories,function(r){return e("van-cell",{key:r.id,attrs:{center:"","is-link":""},on:{click:function(a){return t.openHistory(r)}}},[e("div",{attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t._f("formatWeekRange")(r.id))+" ")]),e("div",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t._f("formatYear")(r.id))+" 第"+t._s(t._f("formatWeek")(r.id))+" ")])])}),t.histories.length>3?e("van-cell",{attrs:{"is-link":"",center:"",title:"",label:"查看更多",to:{name:"TurnipHistories"}}}):t._e()],2),e("van-popup",{style:{height:"70%"},attrs:{position:"bottom",closeable:""},model:{value:t.showHistory,callback:function(r){t.showHistory=r},expression:"showHistory"}},[t.historyItem?e("div",[e("van-divider",[t._v(t._s(t._f("formatWeekRange")(t.historyItem.id)))]),e("div",{staticClass:"little-text padding-a-10"},[t._v(" 買價："+t._s(t.historyItem.buyPrice)+" ")]),e("TurnipSellPrice",{attrs:{"sell-price":t.historyItem.sellPrice}}),e("TurnipLineChart",{attrs:{id:t.historyItem.id,"buy-price":t.historyItem.buyPrice,"sell-price":t.historyItem.sellPrice}})],1):t._e()])],1)},_=[],f=n(u,m,_,!1,null,"84497564",null,null);const b=f.exports;export{b as default};
