import{h as d}from"./index-7cae2806.js";import{t as i}from"./firebase-df27de50.js";var u=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),p=new Uint8Array(16);function f(){if(!u)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return u(p)}var l=[];for(var a=0;a<256;++a)l[a]=(a+256).toString(16).substr(1);function h(r,n){var t=n||0,e=l;return[e[r[t++]],e[r[t++]],e[r[t++]],e[r[t++]],"-",e[r[t++]],e[r[t++]],"-",e[r[t++]],e[r[t++]],"-",e[r[t++]],e[r[t++]],"-",e[r[t++]],e[r[t++]],e[r[t++]],e[r[t++]],e[r[t++]],e[r[t++]]].join("")}function m(r,n,t){var e=n&&t||0;typeof r=="string"&&(n=r==="binary"?new Array(16):null,r=null),r=r||{};var o=r.random||(r.rng||f)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,n)for(var s=0;s<16;++s)n[e+s]=o[s];return n||h(o)}function g(r,n){return new Promise(t=>{i.child("price").child(d(r).format("YYYY-MM-DD")).on("value",e=>{t();const o=e.val();if(!o)return n([]);const s=Object.keys(o).map(c=>({id:c,...o[c]}));n(s)})})}function Y(r){return i.child("price").child(d(r).format("YYYY-MM-DD")).off()}function I(r,n){return new Promise(t=>{i.child("price").child(d(n).format("YYYY-MM-DD")).child(r).once("value",e=>{const o=e.val();t(o)})})}function U(r,n){i.child("price").on("value",t=>{try{const e=t.val(),o=[];Object.keys(e).forEach(s=>{e[s][r]&&o.push({id:s,...e[s][r]})}),n(o)}catch{n([])}})}function L(){return i.child("price").off()}function S(r){i.child("profile").on("value",n=>{const t=n.val();if(!t)return r([]);const e=Object.keys(t).map(o=>({id:o,...t[o]}));r(e)})}function w(){return i.child("profile").off()}function P(r,n,t){return i.child("price").child(d(n).format("YYYY-MM-DD")).child(r).set({...t,dateUpdated:d().toISOString()})}function D(r,n){return i.child("profile").child(r).set({...n,dateUpdated:d().toISOString()})}function M(r){return new Promise(n=>{i.child("group").on("value",t=>{n();const e=t.val();if(!e)return r([]);const o=Object.keys(e).map(s=>e[s]);r(o)})})}function O(){return i.child("group").off()}function j(r){const n=m();return i.child("group").child(n).set({...r,id:n,dateCreated:d().toISOString(),members:[r.creatorId]})}function x(r,n){return i.child("group").child(r).set({...n,dateUpdated:d().toISOString()})}function B(r){return i.child("group").child(r).remove()}function G(r,n){return new Promise(t=>{i.child("group").child(r).on("value",e=>{t();const o=e.val();if(!o)return n(null);n(o)})})}function R(r){return i.child("group").child(r).off()}export{x as a,B as b,j as c,P as d,L as e,U as f,I as g,O as h,w as i,Y as j,M as k,G as l,g as m,S as n,R as r,D as u};
