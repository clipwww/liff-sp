import{n as r}from"./index-7cae2806.js";import{c as a}from"./himawari.svc-db0e291f.js";import"./firebase-df27de50.js";import"./acnh.svc-9e14a934.js";import{t as n}from"./index-8db10a04.js";const o={data(){return{keyword:"",page:1,items:[],isLoading:!1,isFinished:!1,isRefreshing:!1,isError:!1}},methods:{toSafeHtmlString:n,async getList(i=!1){i&&(this.items=[],this.page=1,this.isFinished=!1,this.isRefreshing=!1),this.isRefreshing=!1,this.isLoading=!0;const t=await a({keyword:this.keyword,page:this.page});if(this.isLoading=!1,!t.success){this.isError=!0;return}if(!t.items.length){this.isFinished=!0;return}this.isError=!1,this.page++,this.items.push(...t.items)},goDetails(i){this.$router.push({name:"HimawariDetails",params:{id:i.id},query:{title:i.title}})}}};var l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"list__container"},[e("van-search",{attrs:{"show-action":"",placeholder:"請輸入關鍵字搜尋"},on:{search:function(s){return t.getList(!0)}},model:{value:t.keyword,callback:function(s){t.keyword=typeof s=="string"?s.trim():s},expression:"keyword"}},[e("van-button",{attrs:{slot:"action",type:"primary",size:"small",plain:""},on:{click:function(s){return t.getList(!0)}},slot:"action"},[t._v(" 搜尋 ")])],1),e("div",{staticClass:"list__content with-safe-area-inset-bottom"},[e("van-pull-refresh",{attrs:{"head-height":"150"},on:{refresh:function(s){return t.getList(!0)}},model:{value:t.isRefreshing,callback:function(s){t.isRefreshing=s},expression:"isRefreshing"}},[e("van-list",{attrs:{finished:t.isFinished,error:t.isError,"finished-text":"没有更多了","error-text":"Oops...發生錯誤",offset:"50"},on:{"update:error":function(s){t.isError=s},load:t.getList},model:{value:t.isLoading,callback:function(s){t.isLoading=s},expression:"isLoading"}},[e("div",{attrs:{slot:"loading"},slot:"loading"},t._l(2,function(s){return e("van-cell",{key:s},[e("van-skeleton",{staticClass:"padding-bt-5 padding-lr-0",attrs:{row:4,title:"",avatar:"","avatar-shape":"square","avatar-size":"80"}})],1)}),1),t._l(t.items,function(s){return e("van-cell",{key:s.id,attrs:{"is-link":"",clickable:"",center:""},on:{click:function(d){return t.goDetails(s)}}},[e("van-image",{staticClass:"margin-r-10",attrs:{slot:"icon",src:s.image,width:"80",fit:"contain"},slot:"icon"}),e("div",{staticClass:"little-text",attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(s.title)+" ")])],1)})],2)],1)],1)],1)},c=[],f=r(o,l,c,!1,null,"1874c87f",null,null);const m=f.exports;export{m as default};
