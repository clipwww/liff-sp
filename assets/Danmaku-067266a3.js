import{n as a}from"./index-9ce14ff3.js";import{g as r}from"./himawari.svc-6f3deee1.js";import"./firebase-9126a35c.js";import"./acnh.svc-20a56244.js";const n={data(){return{BASE_URL:"https://mechakucha-api.vercel.app/",keyword:"",page:1,items:[],isLoading:!1,isFinished:!1,isRefreshing:!1,isError:!1}},methods:{async getList(i=!1){if(!this.keyword)return;i&&(this.items=[],this.page=1,this.isFinished=!1,this.isRefreshing=!1),this.isRefreshing=!1,this.isLoading=!0;const e=await r(this.keyword,this.page);if(this.isLoading=!1,!e.success){this.isError=!0;return}if(this.page>=e.page.pageAmount||e.page.dataAmount===0){this.isFinished=!0;return}this.isError=!1,this.page++,this.items.push(...e.items)}}};var o=function(){var e=this,s=e._self._c;return s("div",{staticClass:"list__container"},[s("van-search",{attrs:{"show-action":"",placeholder:"請輸入關鍵字搜尋"},on:{search:function(t){return e.getList(!0)}},model:{value:e.keyword,callback:function(t){e.keyword=typeof t=="string"?t.trim():t},expression:"keyword"}},[s("van-button",{attrs:{slot:"action",type:"primary",size:"small",plain:""},on:{click:function(t){return e.getList(!0)}},slot:"action"},[e._v(" 搜尋 ")])],1),s("div",{staticClass:"list__content with-safe-area-inset-bottom"},[s("van-pull-refresh",{attrs:{"head-height":"150"},on:{refresh:function(t){return e.getList(!0)}},model:{value:e.isRefreshing,callback:function(t){e.isRefreshing=t},expression:"isRefreshing"}},[s("van-list",{attrs:{finished:e.isFinished,error:e.isError,"immediate-check":!1,"finished-text":"没有更多了","error-text":"Oops...發生錯誤",offset:"50"},on:{"update:error":function(t){e.isError=t},load:e.getList},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[s("div",{attrs:{slot:"loading"},slot:"loading"},e._l(2,function(t){return s("van-cell",{key:t},[s("van-skeleton",{staticClass:"padding-bt-5 padding-lr-0",attrs:{row:4,title:"",avatar:"","avatar-shape":"square","avatar-size":"80"}})],1)}),1),e._l(e.items,function(t){return s("van-cell",{key:t.id,attrs:{"is-link":"",center:"",border:!1,url:`${e.BASE_URL}/himawari/${t.group_id}/danmaku?mode=download&group=1&filename=${t.title}`,href:`${e.BASE_URL}/himawari/${t.group_id}/danmaku?mode=download&group=1&filename=${t.title}`}},[s("div",{attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s(t.title)+" ")]),s("div",{staticClass:"little-text",attrs:{slot:"label"},slot:"label"},[e._v(" 彈幕量: "+e._s(t.count)+" ")])])})],2)],1)],1)],1)},l=[],d=a(n,o,l,!1,null,"1a5e0f35",null,null);const p=d.exports;export{p as default};
