import{n as a}from"./index-71d8585f.js";import{b as n}from"./komica.svc-b9838ace.js";import"./firebase-b7fcb020.js";import"./acnh.svc-a593798b.js";const r={data(){return{keyword:"",items:[],isRefreshing:!1,isLoading:!1,komicaType:this.$route.query.type||"new"}},computed:{filterItems(){return this.items.filter(i=>this.keyword?i.title.includes(this.keyword):!0)}},watch:{komicaType:{immediate:!0,handler(i){i&&this.getList()}}},methods:{async getList(){this.isRefreshing=!1,this.isLoading=!0;const i=await n(this.komicaType);this.isLoading=!1,i.success&&(this.items=i.items)},goDetails(i){const t=this.komicaType==="new"?"KomicaNewDetails":"KomicaLiveDetails";this.$router.push({name:t,params:{id:i.id},query:{title:i.title}})}}};var l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"list__container"},[e("van-search",{attrs:{placeholder:"請輸入關鍵字搜尋"},model:{value:t.keyword,callback:function(s){t.keyword=typeof s=="string"?s.trim():s},expression:"keyword"}}),e("div",{staticClass:"list__content with-safe-area-inset-bottom"},[e("van-tabs",{staticClass:"margin-bt-5",attrs:{type:"card"},model:{value:t.komicaType,callback:function(s){t.komicaType=s},expression:"komicaType"}},[e("van-tab",{attrs:{title:"新番捏他",name:"new"}}),e("van-tab",{attrs:{title:"新番實況",name:"live"}})],1),e("van-pull-refresh",{attrs:{"head-height":"150"},on:{refresh:function(s){return t.getList(!0)}},model:{value:t.isRefreshing,callback:function(s){t.isRefreshing=s},expression:"isRefreshing"}},[e("van-cell-group",[t.isLoading?t._l(20,function(s){return e("van-cell",{key:s},[e("van-skeleton",{staticClass:"padding-bt-5 padding-lr-0",attrs:{row:2}})],1)}):t._l(t.filterItems,function(s){return e("van-cell",{key:s.id,attrs:{"is-link":"",clickable:"",center:""},on:{click:function(d){return t.goDetails(s)}}},[e("div",{attrs:{slot:"title"},slot:"title"},[e("span",[t._v(t._s(s.title))])]),e("div",{attrs:{slot:"label"},slot:"label"},[e("span",{staticClass:"margin-r-5"},[t._v(t._s(t._f("formatDate")(s.dateCreated)))])]),e("div",{attrs:{slot:"right-icon"},slot:"right-icon"},[e("van-icon",{attrs:{name:"chat-o",size:"25",info:s.replyCount}})],1)])})],2)],1)],1)],1)},o=[],c=a(r,l,o,!1,null,"6bc1b0f6",null,null);const _=c.exports;export{_ as default};
