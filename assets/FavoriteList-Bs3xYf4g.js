import{_ as F,r as n,o as _,c as b,h as f,v as p,a as t,w as a,g as i,F as M,d as S,e as z,t as r,b as g,M as B,N,T}from"./index-D_e8FN_z.js";import{m as h}from"./firebase-LKY1-RY1.js";const $={beforeRouteEnter(o,e,c){N.state.isLoggedIn?c():(T.fail("必須要登入才可以使用唷！"),c({name:"MovieSearchTypeChoice"}))},data(){return{favoriteList:[],isLoading:!1}},computed:{...B({isLoggedIn:"isLoggedIn",profile:"profile"})},created(){this.isLoading=!0,h.child(`favorite-movie-${this.profile.userId}`).on("value",o=>{const e=o.val();e&&e?.length&&(this.favoriteList=e||[]),this.isLoading=!1})},beforeUnmount(){h.child(`favorite-movie-${this.profile.userId}`).off()},methods:{async removeFavorite(o){try{await this.$dialog.confirm({title:"確定要刪除收藏嗎？"}),this.favoriteList=this.favoriteList.filter(e=>e.id!==o.id),h.child(`favorite-movie-${this.profile.userId}`).set(this.favoriteList)}catch(e){}},getSrc(o=""){return!o||o.includes("l10l010l3322l1")?"https://via.placeholder.com/250x370?text=404":o},goMovie({id:o}){this.$router.push({name:"MovieDetails",params:{id:o}})}}},V={class:"favorite-list"},E={slot:"header",class:"padding-bt-10"},R={slot:"header"},G={class:"fs-14"},U={slot:"footer"},j={class:"flex-between"},q={class:"little-text"},A={slot:"header"},H={class:"text-center padding-bt-30"};function J(o,e,c,w,l,d){const k=n("van-skeleton"),v=n("van-panel"),u=n("van-image"),I=n("van-cell"),m=n("van-col"),L=n("van-tag"),x=n("van-row"),y=n("van-button"),C=n("van-icon");return _(),b("div",V,[f(t(v,null,{default:a(()=>[i("div",E,[t(k,{title:"",avatar:"","avatar-shape":"",row:4})])]),_:1},512),[[p,l.isLoading]]),(_(!0),b(M,null,S(l.favoriteList,s=>f((_(),z(v,{key:s.id,class:"margin-bt-10"},{default:a(()=>[i("div",R,[t(I,{title:s.name,size:"large"},{default:a(()=>[t(u,{slot:"right-icon",width:"40",fit:"contain",src:s.cerImg,"lazy-load":""},null,8,["src"])]),_:2},1032,["title"])]),t(x,{class:"padding-lr-15",gutter:15},{default:a(()=>[t(m,{span:"7"},{default:a(()=>[t(u,{src:d.getSrc(s.poster),width:"100%","lazy-load":"",onClick:D=>d.goMovie(s)},null,8,["src","onClick"])]),_:2},1024),t(m,{span:"17"},{default:a(()=>[i("p",G,r(s.description),1),t(L,{plain:"",class:"margin-r-5 margin-bt-5"},{default:a(()=>[g(" 片長: "+r(s.runtime)+" 分 ",1)]),_:2},1024),t(L,{plain:"",class:"margin-bt-5"},{default:a(()=>[g(" 上映日期: "+r(s.releaseDate),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),i("div",U,[i("div",j,[i("div",q," 加入收藏日期 "+r(o.$filters.formatDate(s.dateCreated)),1),t(y,{icon:"delete",type:"danger",size:"small",onClick:D=>d.removeFavorite(s)},{default:a(()=>[...e[0]||(e[0]=[g(" 刪除收藏 ",-1)])]),_:1},8,["onClick"])])])]),_:2},1024)),[[p,!l.isLoading]])),128)),f(t(v,null,{default:a(()=>[i("div",A,[i("div",H,[t(C,{class:"fs-30",name:"info"}),e[1]||(e[1]=i("div",null,"這裡還什麼都沒有",-1))])])]),_:1},512),[[p,!l.favoriteList.length&&!l.isLoading]])])}const P=F($,[["render",J],["__scopeId","data-v-c4016512"]]);export{P as default};
