import{_ as D,r as n,o as l,c as m,e as u,w as a,a as r,f as _,g as s,t as c,F as k,d as b,b as N,M as x}from"./index-COOF5Zia.js";import{m as B}from"./index-CxtZNmhB.js";import{T as G,a as S}from"./TurnipSellPrice-BCz4E8xJ.js";import"./isArrayLike-fL3jztxv.js";const I=B.getWeekdays(),P={};I.forEach(e=>{P[e.id]={am:"",pm:""}});const U={components:{TurnipLineChart:S,TurnipSellPrice:G},props:{groupList:{type:Array,default(){return[]}},priceList:{type:Array,default(){return[]}},histories:{type:Array,default(){return[]}}},data(){return{weekdays:I,showHistory:!1,historyItem:null}},computed:{...x({isLoggedIn:"isLoggedIn",profile:"profile"}),filterGroupList(){return this.groupList.filter(e=>e.members.includes(this.profile.userId))},filterHistories(){return this.histories.filter((e,d)=>d<3)},item(){return{profile:this.profile,...this.priceList.find(e=>e.id===this.profile.userId)||{buyPrice:"",sellPrice:P}}}},methods:{goDetails(e){this.$router.push({name:"TurnipGroupDetails",params:{id:e.id}})},openHistory(e){this.historyItem=e,this.showHistory=!0}}},V={slot:"title"},W={slot:"label",class:"little-text"},A={class:"padding-bt-10"},E={slot:"header"},F={class:"text-center padding-bt-30"},R={slot:"label"},z={class:"margin-l-5"},M={slot:"title"},Y={slot:"label"},j={key:0},q={class:"little-text padding-a-10"};function J(e,d,L,K,o,t){const w=n("van-image"),p=n("van-cell"),h=n("TurnipSellPrice"),f=n("TurnipLineChart"),y=n("van-panel"),v=n("van-icon"),g=n("van-cell-group"),C=n("van-divider"),T=n("van-popup");return l(),m("div",null,[t.item?(l(),u(y,{key:0},{default:a(()=>[r(p,{slot:"header"},{default:a(()=>[t.item.profile.pictureUrl?(l(),u(w,{key:0,slot:"icon",class:"margin-r-15",src:t.item.profile.pictureUrl,width:"50",height:"50",round:"","lazy-load":""},null,8,["src"])):_("",!0),s("div",V,c(t.item.profile.displayName),1),s("div",W," 買價："+c(t.item.buyPrice),1)]),_:1}),r(h,{"sell-price":t.item.sellPrice},null,8,["sell-price"]),s("div",A,[r(f,{id:t.item.id,"buy-price":t.item.buyPrice,"sell-price":t.item.sellPrice},null,8,["id","buy-price","sell-price"])])]),_:1})):(l(),u(y,{key:1},{default:a(()=>[s("div",E,[s("div",F,[r(v,{class:"fs-30",name:"info"}),d[1]||(d[1]=s("div",null,"本週次還沒提供任何菜價唷",-1))])])]),_:1})),r(g,{title:"已加入群組"},{default:a(()=>[(l(!0),m(k,null,b(t.filterGroupList,i=>(l(),u(p,{key:i.id,title:i.name,center:"","is-link":"",clickable:"",onClick:H=>t.goDetails(i)},{default:a(()=>[s("div",R,[r(v,{name:"user-o"}),s("span",z,c(i.members.length),1)])]),_:2},1032,["title","onClick"]))),128))]),_:1}),r(g,{title:"歷史紀錄"},{default:a(()=>[(l(!0),m(k,null,b(t.filterHistories,i=>(l(),u(p,{key:i.id,center:"","is-link":"",onClick:H=>t.openHistory(i)},{default:a(()=>[s("div",M,c(e.$filters.formatWeekRange(i.id)),1),s("div",Y,c(e.$filters.formatYear(i.id))+" 第"+c(e.$filters.formatWeek(i.id)),1)]),_:2},1032,["onClick"]))),128)),L.histories.length>3?(l(),u(p,{key:0,"is-link":"",center:"",title:"",label:"查看更多",to:{name:"TurnipHistories"}})):_("",!0)]),_:1}),r(T,{show:o.showHistory,"onUpdate:show":d[0]||(d[0]=i=>o.showHistory=i),position:"bottom",closeable:"",style:{height:"70%"}},{default:a(()=>[o.historyItem?(l(),m("div",j,[r(C,null,{default:a(()=>[N(c(e.$filters.formatWeekRange(o.historyItem.id)),1)]),_:1}),s("div",q," 買價："+c(o.historyItem.buyPrice),1),r(h,{"sell-price":o.historyItem.sellPrice},null,8,["sell-price"]),r(f,{id:o.historyItem.id,"buy-price":o.historyItem.buyPrice,"sell-price":o.historyItem.sellPrice},null,8,["id","buy-price","sell-price"])])):_("",!0)]),_:1},8,["show"])])}const $=D(U,[["render",J]]);export{$ as default};
