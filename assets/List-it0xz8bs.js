const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AcnhFishDetails-EqkTy3bV.js","assets/index-D_e8FN_z.js","assets/index-Nny_sJP0.css","assets/AcnhBugsDetails-CUoO3e3-.js","assets/AcnhFossilsDetails-CF4CUjzr.js","assets/AcnhVillagersDetails-BMGogbGD.js","assets/acnh.svc-Dirrrzgx.js","assets/firebase-LKY1-RY1.js","assets/AcnhArtDetails-B53ixv4i.js","assets/AcnhSongsDetails-Cyof7zG3.js"])))=>i.map(i=>d[i]);
import{_ as B,r as n,o,c as l,a as c,w as u,b as k,t as p,g as _,F as m,d as L,f as h,e as f,i as F,l as O,j as g,k as d}from"./index-D_e8FN_z.js";import{g as j}from"./acnh.svc-Dirrrzgx.js";import"./firebase-LKY1-RY1.js";function w(e){switch(e){case"Anteater":return"食蟻獸";case"Bear":return"大熊";case"Bird":return"鳥";case"Bull":return"公牛";case"Cat":return"貓";case"Cub":return"小熊";case"Chicken":return"雞";case"Cow":return"乳牛";case"Alligator":return"鱷魚";case"Deer":return"鹿";case"Dog":return"狗";case"Duck":return"鴨";case"Elephant":return"象";case"Frog":return"蛙";case"Goat":return"山羊";case"Gorilla":return"猩猩";case"Hamster":return"倉鼠";case"Hippo":return"河馬";case"Horse":return"馬";case"Koala":return"無尾熊";case"Kangaroo":return"袋鼠";case"Lion":return"獅";case"Monkey":return"猴";case"Mouse":return"鼠";case"Octopus":return"章魚";case"Eagle":return"鷹";case"Penguin":return"企鵝";case"Pig":return"豬";case"Rabbit":return"兔";case"Rhino":return"犀牛";case"Sheep":return"綿羊";case"Squirrel":return"松鼠";case"Tiger":return"虎";case"Wolf":return"狼";case"Ostrich":return"鴕鳥";default:return e}}const P={filters:{translateSpecies:w},components:{AcnhFishDetails:()=>d(()=>import("./AcnhFishDetails-EqkTy3bV.js"),__vite__mapDeps([0,1,2])),AcnhBugsDetails:()=>d(()=>import("./AcnhBugsDetails-CUoO3e3-.js"),__vite__mapDeps([3,1,2])),AcnhFossilsDetails:()=>d(()=>import("./AcnhFossilsDetails-CF4CUjzr.js"),__vite__mapDeps([4,1,2])),AcnhVillagersDetails:()=>d(()=>import("./AcnhVillagersDetails-BMGogbGD.js"),__vite__mapDeps([5,1,2,6,7])),AcnhArtDetails:()=>d(()=>import("./AcnhArtDetails-B53ixv4i.js"),__vite__mapDeps([8,1,2])),AcnhSongsDetails:()=>d(()=>import("./AcnhSongsDetails-Cyof7zG3.js"),__vite__mapDeps([9,1,2]))},data(){return{keyword:"",species:"",list:null,isLoading:!1,isFinished:!1,showDetails:!1,showSelect:!1,item:null,page:1}},computed:{type(){switch(this.$route.name){case"AcnhFish":return"fish";case"AcnhBugs":return"bugs";case"AcnhFossils":return"fossils";case"AcnhVillagers":return"villagers";case"AcnhSongs":return"songs";case"AcnhArt":return"art";default:return""}},isVillagers(){return this.type==="villagers"},detailsComponentName(){return`${this.$route.name}Details`},objToList(){return Object.keys(this.list||{}).map(e=>this.list[e])},filterList(){return this.objToList?.filter(e=>this.keyword?Object.keys(e.name).some(t=>e.name[t]?.toLowerCase()?.includes(this.keyword?.toLowerCase())||(e.species?w(e.species).includes(this.keyword)||e.species.includes(this.keyword):!1)):!0)?.filter(e=>this.species?e.species===this.species:!0)?.slice(0,this.page*10)??[]},actions(){const e=new Set;return this.objToList.forEach(t=>{e.add(t.species)}),[{name:"全部",value:""},...Array.from(e).map(t=>({name:w(t),value:t}))]}},watch:{type:{immediate:!0,handler(){this.toTop(),this.keyword="",this.species="",this.item=null,this.list=null,this.isFinished=!1,this.isLoading=!1,this.showSelect=!1,this.showDetails=!1,this.page=1,this.getList()}},species(){this.page=1,this.toTop()},keyword(){this.page=1,this.toTop()},showDetails(e){e||(this.item=null)}},methods:{async getList(){this.isLoading=!0;const e=this.type,t=await j(this.type);this.isLoading=!1,!(!t||e!==this.type)&&(this.list=t,this.checkBirthday())},onLoad(){this.isFinished||(this.page+=1,this.filterList.length===this.objToList.length&&(this.isFinished=!0))},checkBirthday(){if(!this.isVillagers)return;const e=this.objToList.filter(r=>g().isSame(g(r.birthday,"D/M"),"day")),t=g().format("M/D");if(e.length&&!localStorage.getItem(t))try{this.$dialog({title:`今日 ${t} 壽星`,message:e.map(r=>`<div class="text-center" style="white-space: initial">
                    <div>${r.name["name-TWzh"]}</div>
                    <img src="${r.icon_uri}" width="80"/>
                  </div>`).join(", "),showCancelButton:!0,confirmButtonText:"今日不再顯示",cancelButtonText:"關閉",beforeClose(r,v){r==="confirm"&&localStorage.setItem(t,1),v()}})}catch(r){}},toTop(){this.$nextTick(()=>{this.$refs.list.scrollTop=0})},openDetails(e){O("狸端機 Lite","開啟詳細資料",`[${this.type}] ${e?.name?.["name-TWzh"]}`),this.showDetails=!0,this.item=e},onSelect(e){this.species=e.value,this.showSelect=!1}}},I={class:"list__container"},x={ref:"list",class:"list__content with-safe-area-inset-bottom"},z={key:0},R={slot:"label"},M={key:1},N={key:0,class:"safe-area-inset-bottom"};function W(e,t,r,v,i,a){const D=n("van-button"),T=n("van-search"),b=n("van-action-sheet"),S=n("van-skeleton"),y=n("van-cell"),A=n("van-image"),C=n("van-list"),V=n("van-popup");return o(),l("div",I,[c(T,{modelValue:i.keyword,"onUpdate:modelValue":t[1]||(t[1]=s=>i.keyword=s),modelModifiers:{trim:!0},"show-action":a.isVillagers,placeholder:"請輸入關鍵字搜尋"},{default:u(()=>[c(D,{slot:"action",icon:"arrow-down",size:"small",onClick:t[0]||(t[0]=s=>i.showSelect=!0)},{default:u(()=>[k(p(i.species||"全部"|e.translateSpecies),1)]),_:1})]),_:1},8,["modelValue","show-action"]),c(b,{show:i.showSelect,"onUpdate:show":t[2]||(t[2]=s=>i.showSelect=s),actions:a.actions,onSelect:a.onSelect},null,8,["show","actions","onSelect"]),_("div",x,[c(C,{finished:i.isFinished,"finished-text":"没有更多了",offset:10,onLoad:a.onLoad},{default:u(()=>[i.isLoading?(o(),l("div",z,[(o(),l(m,null,L(10,s=>c(y,{key:s},{default:u(()=>[c(S,{class:"padding-bt-5 padding-lr-0",row:1,title:"",avatar:"","avatar-shape":"square","avatar-size":"65"})]),_:1})),64))])):h("",!0),i.list?(o(!0),l(m,{key:1},L(a.filterList,(s,E)=>(o(),f(y,{key:s.id,title:s.name["name-TWzh"],"is-link":"",center:"",onClick:U=>a.openDetails(s)},{default:u(()=>[s.icon_uri||s.image_uri?(o(),f(A,{key:0,slot:"icon",class:"margin-r-10",width:"65",src:s.icon_uri||s.image_uri.toLowerCase(),"lazy-load":E>0},null,8,["src","lazy-load"])):h("",!0),_("div",R,[s.price?(o(),l(m,{key:0},[t[4]||(t[4]=_("span",{class:"little-text"},"賣價",-1)),k(" "+p(e.$filters.commafy(s.price)),1)],64)):h("",!0),s.species?(o(),l("div",M,p(s.species|e.translateSpecies),1)):h("",!0)])]),_:2},1032,["title","onClick"]))),128)):h("",!0)]),_:1},8,["finished","onLoad"])],512),c(V,{show:i.showDetails,"onUpdate:show":t[3]||(t[3]=s=>i.showDetails=s),round:"",position:"bottom",closeable:"",style:{height:"90%"}},{default:u(()=>[i.item?(o(),l("div",N,[(o(),f(F(a.detailsComponentName),{item:i.item},null,8,["item"]))])):h("",!0)]),_:1},8,["show"])])}const H=B(P,[["render",W],["__scopeId","data-v-7d6e8f04"]]),J=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"}));export{J as L,w as t};
